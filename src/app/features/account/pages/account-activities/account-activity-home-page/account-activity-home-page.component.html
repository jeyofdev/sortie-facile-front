<app-account-layout pageTitle="Activities" pageSubtitle="View and manage your added activities.">
	<ng-container *ngIf="resolvedActivities$ | async as activities">
		<p>My activities ({{ activities.count }})</p>

		<div class="activity-cards-container">
			<p-dataView
				#dv
				[value]="activities.results"
				[layout]="layout"
				[rows]="6"
				[totalRecords]="activities.count"
				[paginator]="true"
			>
				<ng-template pTemplate="header">
					<p-button
						icon="pi pi-list"
						(click)="dv.layout = 'list'"
						[styleClass]="dv.layout === 'list' ? 'btn-header p-button-active' : 'btn-header '"
					/>

					<p-button
						icon="pi pi-table"
						(click)="dv.layout = 'grid'"
						[styleClass]="dv.layout === 'grid' ? 'btn-header p-button-active' : 'btn-header '"
					/>
				</ng-template>

				<ng-template pTemplate="list" let-activities>
					<app-table-activity-list [activities]="activities"></app-table-activity-list>
				</ng-template>

				<ng-template let-product pTemplate="grid" let-products>
					<ng-container
						*ngFor="let activity of activities.results.slice(dv.first || 0, (dv.first || 0) + (dv.rows || 5))"
					>
						<app-activity-preview-card [activity]="activity"></app-activity-preview-card>
					</ng-container>
				</ng-template>
			</p-dataView>
		</div>
	</ng-container>

	<p-button
		type="submit"
		label="Add new activity"
		icon="pi pi-plus"
		iconPos="right"
		styleClass="btn-cta"
		(click)="onClick()"
	/>
</app-account-layout>
